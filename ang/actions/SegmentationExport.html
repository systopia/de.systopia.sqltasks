<div class="crm-accordion-wrapper crm-sqltask-task relativePosition collapsed">
    <div class="crm-accordion-header accordion-header-custom active action-label">
        <label class="input-checkbox">
            <input ng-model="model['enabled']" style="cursor: pointer;" type="checkbox" ng-true-value="'1'"
                ng-false-value="'0'">
                &nbsp;
                {{ts('Segmentation Export')}}
        </label>
        <span ng-if="model['action_title']" class="sql-task-action-title">{{model['action_title']}}</span>
        <label class="header-delete-btn" ng-click="removeItemFromArray(index)">
            <i class="crm-i fa-trash header-delete" role="img" aria-hidden="true"></i>
            {{ts('Delete')}}
        </label>
    </div>
    <div class="crm-accordion-body" style="display: none;">
        <div class="sql-task-action-template-wrapper">
            <action-template-select
                model='model'
                action-templates='actionTemplates'
                action-template='actionTemplate'>
            </action-template-select>
            <div class="clear"></div>
            <action-template-form
                model='model'
                action-templates='actionTemplates'
                action-template='actionTemplate'>
            </action-template-form>
        </div>
        <div class="sql-tasks">
            <action-additional-info model='model' fieldPrefix="'segmentation_export'" index='index'></action-additional-info>

            <ordinary-select2 model="model['campaign_id']" fieldlabel="ts('Campaign')"
                fieldid="'segmentation_export_campaign_id' + index" optionsArray="campaignData"
                select-change="statusChanged(value, fieldId)" inputMaxWidth="'300px'"
                isdataloaded="isDataLoaded('segmentation_export_campaign_id' + index)"
                field-id-to-change="'segmentation_export_segments' + index">
            </ordinary-select2>

            <multiple-select2 model="model['segments']" fieldlabel="ts('Segments')" inputMaxWidth="'300px'"
                              isdataloaded="isDataLoaded('segmentation_export_segments' + index)"
                              fieldid="'segmentation_export_segments' + index" optionsArray="segmentationData">
            </multiple-select2>

            <text-input model="model['date_from']" fieldlabel="ts('Assignment not before')"
                fieldid="'segmentation_export_date_from' + index" showHelpIcon=true inputMaxWidth="'300px'"
                disabled="getBooleanFromNumber(model['date_current'])"
                helpaction='onInfoPress("Timestamp Options", "id-segmentation-export-datetime", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </text-input>

            <text-input model="model['date_to']" fieldlabel="ts('Assignment not after')"
                fieldid="'segmentation_export_date_to' + index" showHelpIcon=true inputMaxWidth="'300px'"
                disabled="getBooleanFromNumber(model['date_current'])"
                helpaction='onInfoPress("Timestamp Options", "id-segmentation-export-datetime", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </text-input>

            <check-box model="model['date_current']" fieldlabel="ts('Current Assignment')"
                fieldid="'segmentation_export_date_current' + index" showHelpIcon=true checkbox-change="checkboxChange(value)"
                helpaction='onInfoPress("Timestamp Options", "id-segmentation-export-current", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </check-box>

            <check-box model="model['discard_empty']" fieldlabel="ts('Discard empty file?')"
                fieldid="'segmentation_export_discard_empty' + index">
            </check-box>

            <multiple-select2 model="model['exporter']" fieldlabel="ts('Exporter')" isdataloaded="isDataLoaded('segmentation_export_exporter' + index)"
                fieldid="'segmentation_export_exporter' + index" optionsArray="exporterData" inputMaxWidth="'300px'">
            </multiple-select2>

            <text-input model="model['filename']" fieldlabel="ts('File Name')" sizelength="60"
                fieldid="'segmentation_export_filename' + index" showHelpIcon=true inputMaxWidth="'500px'"
                helpaction='onInfoPress("Filename", "id-segmentation-export-filename", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </text-input>

            <text-input model="model['path']" fieldlabel="ts('File Path')" fieldid="'segmentation_export_path' + index"
                showHelpIcon=true sizelength="60" inputMaxWidth="'500px'"
                helpaction='onInfoPress("Path", "id-segmentation-export-path", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </text-input>

            <text-input model="model['email']" fieldlabel="ts('Email to')" fieldid="'segmentation_export_email' + index"
                showHelpIcon=true inputMaxWidth="'300px'"
                helpaction='onInfoPress("Email", "id-segmentation-export-email", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </text-input>

            <ordinary-select2 model="model['email_template']" fieldlabel="ts('Email Template')" inputMaxWidth="'300px'"
                              fieldid="'segmentation_export_email_template' + index" optionsArray="messageTemplateOptions"
                              isdataloaded="isDataLoaded('segmentation_export_email_template' + index)">
            </ordinary-select2>

            <text-input model="model['upload']" fieldlabel="ts('Upload to')" fieldid="'segmentation_export_upload' + index"
                showHelpIcon=true sizelength="60" inputMaxWidth="'300px'"
                helpaction='onInfoPress("SFTP Upload", "id-segmentation-export-sftp", "CRM\/Sqltasks\/Action\/SegmentationExport")'>
            </text-input>

        </div>
    </div>
</div>
