<div class="crm-accordion-wrapper crm-sqltask-task relativePosition collapsed">
    <div class="crm-accordion-header accordion-header-custom active action-label">
        <label class="input-checkbox">
        <input ng-model="model['enabled']" style="cursor: pointer;" type="checkbox" ng-true-value="'1'" ng-false-value="'0'">
          &nbsp;
          {{ts('Assign to Campaign (Segmentation)')}}
        </label>
        <span ng-if="model['action_title']" class="sql-task-action-title">{{model['action_title']}}</span>
        <label class="header-delete-btn" ng-click="removeItemFromArray(index)">
            <i class="crm-i fa-trash header-delete" role="img" aria-hidden="true"></i>
            {{ts('Delete')}}
        </label>
    </div>
    <div class="crm-accordion-body" style="display: none;">
        <div class="sql-task-action-template-wrapper">
            <action-template-select
                model='model'
                action-templates='actionTemplates'
                action-template='actionTemplate'>
            </action-template-select>
            <div class="clear"></div>
            <action-template-form
                model='model'
                action-templates='actionTemplates'
                action-template='actionTemplate'>
            </action-template-form>
        </div>
        <div class="sql-tasks">
            <action-additional-info model='model' fieldPrefix="'segmentation_assign'" index='index'></action-additional-info>

            <text-input model="model['table']" fieldlabel="ts('Data Table')" sizelength="60" inputMaxWidth="'500px'"
                fieldid="'segmentation_assign_table' + index" showHelpIcon=true isrequired="getBooleanFromNumber(model['enabled'])"
                helpaction='onInfoPress("Data table", "id-segmentation-assign-table", "CRM\/Sqltasks\/Action\/SegmentationAssign")'>
            </text-input>

            <ordinary-select2 model="model['campaign_id']" fieldlabel="ts('Campaign')" inputMaxWidth="'300px'"
                fieldid="'segmentation_assign_campaign_id' + index" optionsArray="campaignData"
                isdataloaded="isDataLoaded('segmentation_assign_campaign_id' + index)">
            </ordinary-select2>

            <check-box model="model['clear']" fieldlabel="ts('Clear before assignment')"
                fieldid="'segmentation_assign_clear' + index" showHelpIcon=true
                helpaction='onInfoPress("Clear Campaign", "id-segmentation-assign-clear", "CRM\/Sqltasks\/Action\/SegmentationAssign")'>
            </check-box>

            <text-input model="model['segment_name']" fieldlabel="ts('Segment')"
                fieldid="'segmentation_assign_segment_name' + index" showHelpIcon=true inputMaxWidth="'300px'"
                disabled="getBooleanFromNumber(model['segment_from_table'])"
                helpaction='onInfoPress("Segment", "id-segmentation-assign-segment-name", "CRM\/Sqltasks\/Action\/SegmentationAssign")'>
            </text-input>

            <check-box model="model['segment_from_table']"
                fieldlabel="ts('Segment from data table')" fieldid="'segmentation_assign_segment_from_table' + index"
                showHelpIcon=true
                helpaction='onInfoPress("Segment from data table", "id-segmentation-assign-segment-from-table", "CRM\/Sqltasks\/Action\/SegmentationAssign")'
                checkbox-change="checkboxChange(value)">
            </check-box>

            <ordinary-select2 model="model['start']" fieldlabel="ts('Change Campaign Status')" inputMaxWidth="'300px'"
                              fieldid="'segmentation_assign_start' + index" showHelpIcon=true optionsArray="statusesData" select-change="statusChanged(value)"
                              helpaction='onInfoPress("Change Campaign Status", "id-segmentation-assign-start", "CRM\/Sqltasks\/Action\/SegmentationAssign")'
                              isdataloaded="isDataLoaded('segmentation_assign_start' + index)">
            </ordinary-select2>

            <text-area ng-if="model['start'] == 'restart'"
                model="model['segment_order']" fieldlabel="ts('Segment Order')"
                fieldid="'segmentation_assign_segment_order' + index" rowsnumber='4' inputMaxWidth="'500px'"
                helpaction='onInfoPress("Segment Order", "id-segmentation-assign-segment-order", "CRM\/Sqltasks\/Action\/SegmentationAssign")'
                showHelpIcon=true>
            </text-area>

            <text-input ng-if="model['start'] == 'restart_t'" inputMaxWidth="'500px'"
                model="model['segment_order_table']" fieldlabel="ts('Segment Order Table')"
                fieldid="'segmentation_assign_segment_order_table' + index" showHelpIcon=true sizelength="60"
                helpaction='onInfoPress("Segment Order Table?", "id-segmentation-assign-segment-order-table", "CRM\/Sqltasks\/Action\/SegmentationAssign")'>
            </text-input>

        </div>
    </div>
</div>
